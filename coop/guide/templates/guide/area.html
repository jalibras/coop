
{% extends "base.html" %}

{% load static %}

{% block main %}


<div class="container">
    <h3>{{area.name}}</h3>
    {% if True %}
    <a href="{% url "guide:submit"%}?type={{area.area_type}}&area={{area.id}}" class="btn btn-primary" role="button">Submit a new problem for this area</a>
    {% elif False %}
    <a href="{% url "login"%}?next={{ request.path }}" class="btn btn-primary" role="button">Login to submit a new problem for this area</a>
    
    {% endif %}
    <p>

    <table class="table table-hover problem-list">
        <thead class="problem-list-header-row">
            <th class="col-md-1"><a href="{{request.path}}?order_by={% if ob == "grade" %}-{% endif %}grade">Grade</a></th>
            <th class="col-md-4"><a href="{{request.path}}?order_by={% if ob == "sector" %}-{% endif %}sector">Sector</a></th>
            {% if area.area_type == 'artificial' %}
            <th class="col-md-6"><a href="{{request.path}}?order_by={% if ob == "artificialproblem__holds" %}-{% endif %}artificialproblem__holds">Holds</a></th>
            {% else %}
            <th class="col-md-6"><a href="{{request.path}}?order_by=naturalproblem__name">Name</a></th>
            {% endif %}
            <th class="col-md-1"><a href="{{request.path}}?order_by=grade">Done</a></th>
        </thead>
        {% for prob in prob_list %}
        <tr data-toggle="collapse" data-target="#collapse{{prob.id}}" class="accordion-toggle problem-list-item">
            <td class="col-md-1 problem-grade" data="{{prob.grade}}"><div >{{prob.grade}}</div></td>
            <td class="col-md-4">{{prob.sector.name}}</td>
            <td class="col-md-6">
                {% if prob.artificialproblem %}
                {{prob.artificialproblem.holds}}
                {% elif prob.naturalproblem %}
                {{prob.naturalproblem.name}}
                {% else %}
                {%endif%}
            </td>
            <td class="col-md-1">{% if request.user.member %} {% if request.user.member in prob.members.all %}<span class="glyphicon glyphicon-ok problem-member-checkmark"></span>{% else %}{%endif %} {%else %} NA {% endif %}</td>
        </tr>
        <tr id="collapse{{prob.id}}" class="accordion-body collapse">
            <td colspan="3">{{prob.description}} <a href="{% url "guide:problem" prob.id %}"><span class="glyphicon glyphicon-info-sign problem-info-sign"></span></a></td>
        </tr>
        {% endfor %}
    </table>

</div>


<script src="{% static "js/area.js" %}"></script>

{% endblock %}



