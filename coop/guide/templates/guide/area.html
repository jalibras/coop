
{% extends "base.html" %}

{% load static %}

{% block main %}


<div class="container">
    <h3>{{area.name}}</h3>
    {% if True %}
    <a href="{% url "guide:submit" area.area_type %}?area={{area.id}}&setter={{request.user.first_name}} {{request.user.last_name}}" class="btn btn-primary" role="button">Submit a new problem for this area</a>
    {% elif False %}
    <a href="{% url "login"%}?next={{ request.path }}" class="btn btn-primary" role="button">Login to submit a new problem for this area</a>
    
    {% endif %}
    <p>

    <table class="table table-hover problem-list">
        <thead class="problem-list-header-row">
            <th class="col-md-1"><a href="{{request.path}}?order_by={% if ob == "grade" %}-{% endif %}grade">Grade</a></th>
            <th class="col-md-4"><a href="{{request.path}}?order_by={% if ob == "sector" %}-{% endif %}sector">Sector</a></th>
            {% if area.area_type == 'artificial' %}
            <th class="col-md-3"><a href="{{request.path}}?order_by={% if ob == "artificialproblem__holds" %}-{% endif %}artificialproblem__holds">Hold colour</a></th>
            <th class="col-md-3"><a href="{{request.path}}?order_by={% if ob == "artificialproblem__date" %}-{% endif %}artificialproblem__date">Date</a></th>
            {% else %}
            <th class="col-md-6"><a href="{{request.path}}?order_by=naturalproblem__name">Name</a></th>
            {% endif %}
            {% if request.user.member %}
            <th class="col-md-1">Done</th>
            {% endif %}
        </thead>
        {% for prob in prob_list %}
        <tr class="clickable-row" onclick="rowClickHandler(this)" data-href="{% url "guide:problem" prob.id %}">
            <td class="col-md-1 problem-grade" data="{{prob.grade}}"><div >{{prob.grade}}</div></td>
            <td class="col-md-4">{{prob.sector.name}}</td>
            {% if prob.artificialproblem %}
            <td class="col-md-3">
                {{prob.artificialproblem.holds}}
            </td>
            <td class="col-md-3">
                {{prob.artificialproblem.date | default:"" }}
            </td>
            {% elif prob.naturalproblem %}
            <td class="col-md-6">
                {{prob.naturalproblem.name}}
            </td>
            {% else %}
            {%endif%}
            {% if request.user.member %}
            <td class="col-md-1">{% if request.user.member %} {% if request.user.member in prob.done_by.all %}<span class="glyphicon glyphicon-ok problem-member-checkmark"></span>{% else %}<span class="glyphicon glyphicon-remove"></span>{%endif %} {%else %}  {% endif %}</td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>

</div>


<script src="{% static "js/area.js" %}"></script>

{% endblock %}



